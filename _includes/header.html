<header>
    <nav id="nav">
        <h3>Guess I needed a menu of sorts.</h3>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/projects">Some of what I've done</a></li>
            <li><a href="/about">About me</a></li>
            <li><a href="/about#contact">Contacts</a></li>
        </ul>
    </nav>
    <div id="top-closed-menu">
        {% if page.collection == 'projects' %}
        <a href="javascript:history.back()" class="button button-back">
            <div class="arrow">
                <span>1</span>
            </div>
            <h5>Back to projects</h5>
        </a>
        {% else %}
        <a href="/" class="button button-back">
            <div class="arrow">
                <span>1</span>
            </div>
            <h5>Back to beginning</h5>
        </a>
        {% endif %}

        <div id="menu-button" class="transform-button"></div>
    </div>
    <script>
        $(document).ready(function() {
            if (window.matchMedia('(max-width:500px)').matches) {
                var open = 0;
                $("#nav").hide();
                $("#menu-button").click(function() {
                    $("#nav").stop().slideToggle(150, 'swing');
                    open = open ? 0 : 1;
                    $("#menu-button").toggleClass('transform-button');
                    $("#top-closed-menu").animate({
                        'top': '20px'
                    });
                });

                $("main").not("header *").on('click', function() {
                    if (open == 1) {
                        $("#nav").stop().slideToggle(100, 'swing', function() {
                            open = open ? 0 : 1;
                            $("#menu-button").toggleClass('transform-button');
                            $("#top-closed-menu").animate({
                                'top': ''
                            });
                        });
                    }
                });
            }
        });

    </script>
</header>
